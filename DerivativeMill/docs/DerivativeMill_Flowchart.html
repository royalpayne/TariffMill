<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Derivative Mill - Application Flowchart</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            padding: 20px;
            color: #e0e0e0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #42A0BD;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .flowchart {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .section {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 25px;
            width: 100%;
            max-width: 1200px;
            border: 1px solid rgba(66, 160, 189, 0.3);
        }

        .section-title {
            color: #42A0BD;
            font-size: 1.4em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(66, 160, 189, 0.3);
        }

        .flow-row {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }

        .box {
            padding: 15px 25px;
            border-radius: 10px;
            text-align: center;
            min-width: 150px;
            font-weight: 500;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .box:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .start {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border-radius: 25px;
        }

        .process {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }

        .decision {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #333;
            transform: rotate(0deg);
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            padding: 30px 40px;
        }

        .decision:hover {
            transform: translateY(-3px) rotate(0deg);
        }

        .data {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
            clip-path: polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%);
            padding: 15px 35px;
        }

        .output {
            background: linear-gradient(135deg, #6f42c1, #5a2d91);
            color: white;
        }

        .config {
            background: linear-gradient(135deg, #6c757d, #545b62);
            color: white;
        }

        .database {
            background: linear-gradient(135deg, #fd7e14, #dc6502);
            color: white;
            border-radius: 10px 10px 50% 50%;
            padding: 20px 25px;
        }

        .end {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            border-radius: 25px;
        }

        .arrow {
            color: #42A0BD;
            font-size: 1.5em;
            font-weight: bold;
        }

        .arrow-down {
            font-size: 2em;
            text-align: center;
            color: #42A0BD;
        }

        .branch {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin: 20px 0;
        }

        .branch-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .branch-label {
            color: #888;
            font-size: 0.9em;
            font-style: italic;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .feature-box {
            background: rgba(66, 160, 189, 0.1);
            border: 1px solid rgba(66, 160, 189, 0.3);
            border-radius: 8px;
            padding: 15px;
        }

        .feature-box h4 {
            color: #42A0BD;
            margin-bottom: 8px;
        }

        .feature-box ul {
            list-style: none;
            font-size: 0.9em;
        }

        .feature-box li {
            padding: 3px 0;
            color: #aaa;
        }

        .feature-box li::before {
            content: ">";
            color: #42A0BD;
            margin-right: 8px;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-box {
            width: 30px;
            height: 20px;
            border-radius: 4px;
        }

        .legend-text {
            font-size: 0.85em;
            color: #aaa;
        }

        @media (max-width: 768px) {
            .flow-row {
                flex-direction: column;
            }
            .branch {
                flex-direction: column;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Derivative Mill</h1>
        <p class="subtitle">Customs Documentation Processing System - Application Flowchart</p>

        <div class="flowchart">
            <!-- Startup Section -->
            <div class="section">
                <h2 class="section-title">1. Application Startup</h2>
                <div class="flow-row">
                    <div class="box start">Launch Application</div>
                    <span class="arrow">></span>
                    <div class="box database">Initialize Database</div>
                    <span class="arrow">></span>
                    <div class="box config">Load Configuration</div>
                    <span class="arrow">></span>
                    <div class="box process">Apply Theme & Settings</div>
                </div>
                <div class="arrow-down">v</div>
                <div class="flow-row">
                    <div class="box process">Load MIDs</div>
                    <span class="arrow">></span>
                    <div class="box process">Load Mapping Profiles</div>
                    <span class="arrow">></span>
                    <div class="box process">Scan Input Directory</div>
                    <span class="arrow">></span>
                    <div class="box start">Ready</div>
                </div>
            </div>

            <!-- Invoice Mapping Workflow -->
            <div class="section">
                <h2 class="section-title">2. Invoice Column Mapping</h2>
                <div class="flow-row">
                    <div class="box data">Select Input File</div>
                    <span class="arrow">></span>
                    <div class="box config">Select Map Profile</div>
                    <span class="arrow">></span>
                    <div class="box process">Map Invoice Columns</div>
                </div>
                <div class="arrow-down">v</div>
                <div class="flow-row">
                    <div class="box process">Validate Required Fields</div>
                </div>
                <!-- Branch with proper layout - no crossing arrows -->
                <div style="display: flex; justify-content: center; gap: 100px; margin: 20px 0; position: relative;">
                    <!-- Left branch: Complete path -->
                    <div class="branch-item">
                        <span class="branch-label">Complete</span>
                        <span class="arrow-down">v</span>
                        <div class="box process">Create Data Frame</div>
                    </div>
                    <!-- Right branch: Missing Fields path -->
                    <div class="branch-item">
                        <span class="branch-label">Missing Fields</span>
                        <span class="arrow-down">v</span>
                        <div class="box output">Manual Column Mapping</div>
                        <span class="arrow-down">v</span>
                        <span class="branch-label" style="font-size: 0.8em;">Returns to Validate</span>
                    </div>
                </div>
            </div>

            <!-- Main Processing Workflow -->
            <div class="section">
                <h2 class="section-title">3. Invoice Processing Workflow</h2>
                <div class="flow-row">
                    <div class="box data">Load File Data</div>
                    <span class="arrow">></span>
                    <div class="box process">Parse Invoice Data</div>
                    <span class="arrow">></span>
                    <div class="box database">Lookup Parts Master</div>
                </div>
                <div class="arrow-down">v</div>
                <div class="flow-row">
                    <div class="box database">Match HTS Codes</div>
                    <span class="arrow">></span>
                    <div class="box process">Calculate Sec 232 Tariffs</div>
                    <span class="arrow">></span>
                    <div class="box process">Check Sec 301 Exclusions</div>
                </div>
                <div class="arrow-down">v</div>
                <div class="flow-row">
                    <div class="box output">Display Preview</div>
                    <span class="arrow">></span>
                    <div class="box data">Enter CI Value & Weight</div>
                    <span class="arrow">></span>
                    <div class="box process">Validate Invoice Total</div>
                </div>
                <div class="arrow-down">v</div>
                <div class="branch">
                    <div class="branch-item">
                        <span class="branch-label">Values Match</span>
                        <div class="box start">Export Worksheet</div>
                    </div>
                    <div class="branch-item">
                        <span class="branch-label">Values Don't Match</span>
                        <div class="box process">Edit Values</div>
                        <span class="arrow-down">v</span>
                        <div class="box process">Adjust Line Items</div>
                    </div>
                </div>
            </div>

            <!-- Export Process -->
            <div class="section">
                <h2 class="section-title">4. Export Process</h2>
                <div class="flow-row">
                    <div class="box process">Apply Output Mapping</div>
                    <span class="arrow">></span>
                    <div class="box process">Apply Column Visibility</div>
                    <span class="arrow">></span>
                    <div class="box process">Apply Color Coding</div>
                </div>
                <div class="arrow-down">v</div>
                <div class="branch">
                    <div class="branch-item">
                        <span class="branch-label">Single File</span>
                        <div class="box output">Export Excel File</div>
                    </div>
                    <div class="branch-item">
                        <span class="branch-label">Split by Invoice</span>
                        <div class="box output">Export Multiple Files</div>
                    </div>
                </div>
                <div class="arrow-down">v</div>
                <div class="flow-row">
                    <div class="box process">Move Source to Processed</div>
                    <span class="arrow">></span>
                    <div class="box start">Complete</div>
                </div>
            </div>

            <!-- Data Management -->
            <div class="section">
                <h2 class="section-title">5. Data Management</h2>
                <div class="feature-grid">
                    <div class="feature-box">
                        <h4>Parts Master Database</h4>
                        <ul>
                            <li>Part Number & Description</li>
                            <li>HTS Code Mapping</li>
                            <li>Country of Origin</li>
                            <li>MID Assignment</li>
                            <li>Section 232 Ratios (Steel, Aluminum, Copper, Wood, Auto)</li>
                            <li>Melt/Cast/Smelt Countries</li>
                            <li>Sec 301 Exclusion Tariffs</li>
                        </ul>
                    </div>
                    <div class="feature-box">
                        <h4>Section 232 Tariffs</h4>
                        <ul>
                            <li>HTS Code Classification</li>
                            <li>Material Type (Steel, Aluminum, etc.)</li>
                            <li>Declaration Codes</li>
                            <li>Chapter Descriptions</li>
                        </ul>
                    </div>
                    <div class="feature-box">
                        <h4>Section 232 Actions</h4>
                        <ul>
                            <li>Tariff Numbers</li>
                            <li>Ad Valorem Rates</li>
                            <li>Effective/Expiration Dates</li>
                            <li>Additional Declarations</li>
                        </ul>
                    </div>
                    <div class="feature-box">
                        <h4>MID Management</h4>
                        <ul>
                            <li>Manufacturer ID Codes</li>
                            <li>Quick Selection Dropdown</li>
                            <li>Per-Shipment Override</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Configuration -->
            <div class="section">
                <h2 class="section-title">6. Configuration Options</h2>
                <div class="feature-grid">
                    <div class="feature-box">
                        <h4>Invoice Mapping Profiles</h4>
                        <ul>
                            <li>Column Drag & Drop Mapping</li>
                            <li>Header Row Selection</li>
                            <li>Save/Load Profiles</li>
                            <li>Client-Specific Mappings</li>
                        </ul>
                    </div>
                    <div class="feature-box">
                        <h4>Output Mapping Profiles</h4>
                        <ul>
                            <li>Custom Column Names</li>
                            <li>Column Visibility Toggles</li>
                            <li>Split by Invoice Option</li>
                            <li>Export Profile Selection</li>
                        </ul>
                    </div>
                    <div class="feature-box">
                        <h4>Application Settings</h4>
                        <ul>
                            <li>Theme Selection (Light/Dark/Ocean)</li>
                            <li>Font Size Adjustment</li>
                            <li>Input/Output Directories</li>
                            <li>Database Location</li>
                            <li>Auto-Update Check</li>
                        </ul>
                    </div>
                    <div class="feature-box">
                        <h4>Color Customization</h4>
                        <ul>
                            <li>Preview Table Row Colors</li>
                            <li>Export Font Colors per Material</li>
                            <li>Sec 301 Background Highlighting</li>
                            <li>Section 232 Material Indicators</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Visual Indicators -->
            <div class="section">
                <h2 class="section-title">7. Visual Indicators in Preview</h2>
                <div class="flow-row">
                    <div class="box" style="background: #4a4a4a; color: white;">Steel (232)</div>
                    <div class="box" style="background: #3498db; color: white;">Aluminum (232)</div>
                    <div class="box" style="background: #e67e22; color: white;">Copper (232)</div>
                    <div class="box" style="background: #27ae60; color: white;">Wood (232)</div>
                    <div class="box" style="background: #9b59b6; color: white;">Auto (232)</div>
                    <div class="box" style="background: #ff0000; color: white;">Non-232</div>
                </div>
                <div class="flow-row" style="margin-top: 15px;">
                    <div class="box" style="background: #ffc8c8; color: #333;">Sec 301 Exclusion (Pink Background)</div>
                    <div class="box" style="background: #333; color: white;">Normal Part</div>
                    <div class="box" style="background: #333; color: white;">Part No</div>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-box" style="background: linear-gradient(135deg, #28a745, #20c997);"></div>
                    <span class="legend-text">Start/End/Success</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box" style="background: linear-gradient(135deg, #007bff, #0056b3);"></div>
                    <span class="legend-text">Process Step</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box" style="background: linear-gradient(135deg, #17a2b8, #138496);"></div>
                    <span class="legend-text">Data Input</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box" style="background: linear-gradient(135deg, #6f42c1, #5a2d91);"></div>
                    <span class="legend-text">Output</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box" style="background: linear-gradient(135deg, #fd7e14, #dc6502);"></div>
                    <span class="legend-text">Database</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box" style="background: linear-gradient(135deg, #6c757d, #545b62);"></div>
                    <span class="legend-text">Configuration</span>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
